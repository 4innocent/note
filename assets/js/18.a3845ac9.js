(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{435:function(a,s,t){"use strict";t.r(s);var e=t(56),r=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"命令行工具"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#命令行工具"}},[a._v("#")]),a._v(" 命令行工具")]),a._v(" "),t("h2",{attrs:{id:"jps"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jps"}},[a._v("#")]),a._v(" jps")]),a._v(" "),t("p",[a._v("用来查询正在运行的jvm虚拟机进程")]),a._v(" "),t("h2",{attrs:{id:"jstat"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jstat"}},[a._v("#")]),a._v(" jstat")]),a._v(" "),t("p",[a._v("查看jvm的统计信息，显示jvm虚拟机中的类加载情况、内存、垃圾收集等信息")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("jstat -class pid "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看类的加载情况")]),a._v("\njstat -class -t pid "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看类的加载情况和程序执行了多长时间")]),a._v("\njstat -gc pid "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看GC信息")]),a._v("\njstat -class pid "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1000")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("10")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查询类的加载情况，每隔一秒打印一次，一共打印10次")]),a._v("\n")])])]),t("p",[a._v("-t：显示程序执行了多长时间，可以依此计算垃圾回收占程序运行时间的比例")]),a._v(" "),t("ul",[t("li",[a._v("编译相关\n"),t("ul",[t("li",[a._v("-class：显示类加载情况")])])]),a._v(" "),t("li",[a._v("GC相关\n"),t("ul",[t("li",[a._v("-gc：显示Survivor0区、Survivor1区、Eden区、old区、方法区内存大小及占用情况，YGC、FGC次数以及消耗时间")]),a._v(" "),t("li",[a._v("-gcutil：信息显示为占比")])])]),a._v(" "),t("li",[a._v("JIT相关：\n"),t("ul",[t("li",[a._v("-compiler：JIT编译信息")])])])]),a._v(" "),t("h2",{attrs:{id:"jinfo"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jinfo"}},[a._v("#")]),a._v(" jinfo")]),a._v(" "),t("p",[a._v("查看、修改当前运行的虚拟机参数")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("jinfo -sysprops pid "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看系统参数等同于调用System.getProperties()")]),a._v("\njinfo -flags pid "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看系统被赋过值的一些参数")]),a._v("\njinfo -flag 参数名 pid "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看具体参数")]),a._v("\n")])])]),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("jinfo -flag +PrintGCDetails PID "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 修改布尔类型参数")]),a._v("\njinfo -flag 参数名"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("值 PID "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 修改值类型参数")]),a._v("\n")])])]),t("h2",{attrs:{id:"jmap"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jmap"}},[a._v("#")]),a._v(" jmap")]),a._v(" "),t("p",[a._v("jmap可以获取堆转储快照文件或者获取堆内存相关信息\n-dump：生成java堆转储文件，"),t("span",{staticStyle:{color:"red"}},[a._v("常用")]),a._v("\n-heap：输出整个堆的信息\n-histo：输出堆中类变量的信息")]),a._v(" "),t("ul",[t("li",[a._v("使用一：\n"),t("ul",[t("li",[a._v("手动使用")])])])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("jmap -dump:format"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("b,file"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("filename.hprof"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("pid"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 转储堆中所有对象")]),a._v("\njmap -dump:live,format"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("b,file"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("filename.hprof"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("pid"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 只转储堆中存活的对象，可以减小生成文件大小，常用")]),a._v("\n")])])]),t("ul",[t("li",[a._v("自动使用，在发生异常时自动收集，文件过大可能会出问题")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 设置jvm参数，在发生OOM时自动生成hprof文件，有时文件过大会出问题")]),a._v("\n-XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("filename.hprof"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),t("ul",[t("li",[a._v("使用二")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("jmap -heap "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("pid"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 显示堆内存信息")]),a._v("\njmap -histo "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("pid"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 显示堆内对象信息")]),a._v("\n")])])]),t("h2",{attrs:{id:"jstack"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jstack"}},[a._v("#")]),a._v(" jstack")]),a._v(" "),t("p",[a._v("查看虚拟机堆栈信息")]),a._v(" "),t("h2",{attrs:{id:"jcmd"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jcmd"}},[a._v("#")]),a._v(" jcmd")]),a._v(" "),t("p",[a._v("可以用来实现除了jstat外的所有命令功能")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("jcmd "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("pid"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("help")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看当前线程可用的所有线程")]),a._v("\njcmd "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("pid"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("命令"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看相关内容信息")]),a._v("\n")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);